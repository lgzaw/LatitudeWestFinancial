<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LW Financial - Strategy Feasibility & Input</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="./script.js"></script>
    <link rel="stylesheet" type="text/css" href="./styles.css">
</head>
<body>
    <!-- FEASIBILITY FILTER PAGE -->
    <div id="feasibility-page" class="page active">
        <header>
            <div class="container">
                <h1>Strategy Feasibility Assessment</h1>
                <p>Identify which strategies work for your family situation</p>
            </div>
        </header>
        
        <div class="container">
            <div class="card">
                <div class="page-header">
                    <button class="back-button" onclick="goBackToMatchmaker()">‚Üê Back to Strategy Selection</button>
                    <h2>Step 1: Feasibility Check</h2>
                </div>
                
                <p class="instruction-text">
                    Review the strategies you selected. Check <strong>ALL strategies that are NOT feasible</strong> for your situation. 
                    Leave unchecked the strategies you want to analyze.
                </p>
                
                <div class="feasibility-grid" id="feasibility-grid">
                    <!-- Dynamic content will be inserted here by JavaScript -->
                    <div class="loading-message">
                        <div class="spinner"></div>
                        <p>Loading selected strategies...</p>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 3rem;">
                    <button id="proceed-to-inputs" onclick="proceedToModelInputs()" disabled>
                        Continue to Detailed Inputs ‚Üí
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- DYNAMIC MODEL INPUT PAGES -->
    <!-- These will be shown/hidden based on user selection -->
    
    <!-- Three for Thirty Page -->
    <div id="three-thirty-page" class="page model-input-page">
        <header>
            <div class="container">
                <h1>Three for Thirty Strategy</h1>
                <p>Child savings plan with 3-year rent-free living</p>
            </div>
        </header>
        
        <div class="container">
            <div class="page-header">
                <button class="back-button" onclick="goBackToFeasibility()">‚Üê Back to Feasibility Check</button>
                <h2>Child Lives Rent-Free for 3 Years</h2>
            </div>
            
            <div class="card">
                <div class="scenario-explanation">
                    <p><strong>Logic:</strong> Calculate if saving 70% of child's gross household income for three years 
                    can reach target down payment amount.</p>
                    
                    <p><strong>Comparison:</strong> Compare this self-saving method against parents borrowing $200k for the child.</p>
                </div>
                
                <div class="input-section">
                    <div>
                        <h3>Child's Financial Details</h3>
                        
                        <div class="input-group">
                            <label for="tt-child-income">Child's Annual Gross Income ($)</label>
                            <div class="input-with-helper">
                                <input type="number" id="tt-child-income" value="60000" min="0">
                                <button type="button" class="helper-btn" onclick="useDefault('tt-child-income', 60000)">
                                    ü§î I don't know?
                                </button>
                            </div>
                            <div class="default-feedback" id="tt-child-income-feedback"></div>
                        </div>
                        
                        <div class="input-group">
                            <label for="tt-savings-rate">Savings Rate (%)</label>
                            <div class="input-with-helper">
                                <input type="number" id="tt-savings-rate" value="70" min="0" max="100">
                                <small>Default: 70% (recommended for this strategy)</small>
                            </div>
                        </div>
                        
                        <div class="input-group">
                            <label for="tt-current-savings">Current Savings for Down Payment ($)</label>
                            <input type="number" id="tt-current-savings" value="0" min="0">
                        </div>
                    </div>
                    
                    <div>
                        <h3>Parent's Support Option</h3>
                        
                        <div class="input-group">
                            <label for="tt-parent-loan-amount">Parent Loan Amount ($)</label>
                            <div class="input-with-helper">
                                <input type="number" id="tt-parent-loan-amount" value="200000" min="0">
                                <small>Alternative: Parents borrow this amount for child</small>
                            </div>
                        </div>
                        
                        <div class="input-group">
                            <label for="tt-parent-loan-rate">Parent Loan Interest Rate (%)</label>
                            <div class="input-with-helper">
                                <input type="number" id="tt-parent-loan-rate" value="5" step="0.1" min="0">
                                <button type="button" class="helper-btn" onclick="useDefault('tt-parent-loan-rate', 5)">
                                    ü§î I don't know?
                                </button>
                            </div>
                            <div class="default-feedback" id="tt-parent-loan-rate-feedback"></div>
                        </div>
                        
                        <div class="input-group">
                            <label for="tt-parent-tax-rate">Parent's Marginal Tax Rate (%)</label>
                            <div class="input-with-helper">
                                <input type="number" id="tt-parent-tax-rate" value="25" step="0.1" min="0" max="100">
                                <button type="button" class="helper-btn" onclick="useDefault('tt-parent-tax-rate', 25)">
                                    ü§î I don't know?
                                </button>
                            </div>
                            <div class="default-feedback" id="tt-parent-tax-rate-feedback"></div>
                        </div>
                    </div>
                    
                    <div>
                        <h3>Housing Market & Timeline</h3>
                        
                        <div class="input-group">
                            <label for="tt-target-downpayment">Target Down Payment ($)</label>
                            <input type="number" id="tt-target-downpayment" value="80000" min="0">
                        </div>
                        
                        <div class="input-group">
                            <label for="tt-home-price">Target Home Price ($)</label>
                            <input type="number" id="tt-home-price" value="400000" min="0">
                        </div>
                        
                        <div class="input-group">
                            <label for="tt-savings-years">Savings Period (Years)</label>
                            <input type="number" id="tt-savings-years" value="3" min="1" max="10">
                            <small>Default: 3 years rent-free living</small>
                        </div>
                        
                        <!-- Comfort Scale for this strategy 
                        <div class="input-group">
                            <label>Your Comfort Level with This Strategy</label>
                            <div class="comfort-scale-inline">
                                <span>Least Favorite</span>
                                <input type="range" min="1" max="5" value="3" class="comfort-slider" id="tt-comfort">
                                <span>Top Option</span>
                                <div class="comfort-labels">
                                    <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span>
                                </div>
                            </div>-->
                        </div>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button onclick="saveThreeThirtyInputs()">Save & Continue</button>
                    <button class="secondary-btn" onclick="skipModel('three-thirty')">Skip This Model</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Co-Investing Page -->
    <div id="co-investing-page" class="page model-input-page">
        <header>
            <div class="container">
                <h1>Co-Investing Strategy</h1>
                <p>Compare lending from investments vs. keeping money in stocks</p>
            </div>
        </header>
        
        <div class="container">
            <div class="page-header">
                <button class="back-button" onclick="goBackToFeasibility()">‚Üê Back to Feasibility Check</button>
                <h2>Stock Investment vs. Home Purchase Loan</h2>
            </div>
            
            <div class="card">
                <div class="scenario-explanation">
                    <p><strong>Logic:</strong> Parents have money invested in stocks. Compare two scenarios:</p>
                    <ol>
                        <li><strong>Keep in Stocks:</strong> Leave $200,000 invested with 6% expected return</li>
                        <li><strong>Lend to Child:</strong> Give $200,000 to child for home purchase with 5% interest</li>
                    </ol>
                    <p><strong>Comparison:</strong> Which has higher 30-year value: stock growth or home equity growth + interest income?</p>
                </div>
                
                <div class="input-section">
                    <div>
                        <h3>Parent's Investment Details</h3>
                        
                        <div class="input-group">
                            <label for="ci-investment-amount">Investment Amount in Stocks ($)</label>
                            <div class="input-with-helper">
                                <input type="number" id="ci-investment-amount" value="200000" min="0">
                                <button type="button" class="helper-btn" onclick="useDefault('ci-investment-amount', 200000)">
                                    ü§î I don't know?
                                </button>
                            </div>
                            <div class="default-feedback" id="ci-investment-amount-feedback"></div>
                        </div>
                        
                        <div class="input-group">
                            <label for="ci-account-type">Account Type</label>
                            <select id="ci-account-type">
                                <option value="non-registered">Non-Registered (Taxable)</option>
                                <option value="tfsa">TFSA (Tax-Free)</option>
                                <option value="rrsp">RRSP (Tax-Deferred)</option>
                            </select>
                        </div>
                        
                        <div class="input-group">
                            <label for="ci-stock-return">Expected Annual Stock Return (%)</label>
                            <div class="input-with-helper">
                                <input type="number" id="ci-stock-return" value="6" step="0.1">
                                <button type="button" class="helper-btn" onclick="useDefault('ci-stock-return', 6)">
                                    ü§î I don't know?
                                </button>
                            </div>
                            <div class="default-feedback" id="ci-stock-return-feedback"></div>
                        </div>
                        
                        <div class="input-group">
                            <label for="ci-stock-volatility">Stock Volatility (%)</label>
                            <div class="input-with-helper">
                                <input type="number" id="ci-stock-volatility" value="10" step="0.1" min="0">
                                <button type="button" class="helper-btn" onclick="useDefault('ci-stock-volatility', 10)">
                                    ü§î I don't know?
                                </button>
                            </div>
                            <div class="default-feedback" id="ci-stock-volatility-feedback"></div>
                        </div>
                    </div>
                    
                    <div>
                        <h3>Loan to Child Details</h3>
                        
                        <div class="input-group">
                            <label for="ci-loan-amount">Loan Amount to Child ($)</label>
                            <div class="input-with-helper">
                                <input type="number" id="ci-loan-amount" value="200000" min="0">
                                <button type="button" class="helper-btn" onclick="useDefault('ci-loan-amount', 200000)">
                                    ü§î I don't know?
                                </button>
                            </div>
                            <div class="default-feedback" id="ci-loan-amount-feedback"></div>
                        </div>
                        
                        <div class="input-group">
                            <label for="ci-loan-rate">Interest Rate on Loan to Child (%)</label>
                            <div class="input-with-helper">
                                <input type="number" id="ci-loan-rate" value="5" step="0.1">
                                <button type="button" class="helper-btn" onclick="useDefault('ci-loan-amount', 5)">
                                    ü§î I don't know?
                                </button>
                            </div>
                            <div class="default-feedback" id="ci-loan-rate-feedback"></div>
                        </div>
                        
                        <div class="input-group">
                            <label for="ci-repayment-type">Repayment Type</label>
                            <select id="ci-repayment-type">
                                <option value="lump-sum">Lump Sum after 10 years</option>
                                <option value="interest-only">Interest-only payments</option>
                                <option value="principal-interest">Principal + Interest payments</option>
                            </select>
                        </div>
                        
                        <div class="input-group">
                            <label for="ci-tax-advantage">Tax Advantage on Loan?</label>
                            <select id="ci-tax-advantage">
                                <option value="no">No - No special tax treatment</option>
                                <option value="yes">Yes - Tax advantage applies</option>
                            </select>
                        </div>
                    </div>
                    
                    <div>
                        <h3>Child's Home Details</h3>
                        
                        <div class="input-group">
                            <label for="ci-home-price">Home Purchase Price ($)</label>
                            <input type="number" id="ci-home-price" value="400000" min="0">
                        </div>
                        
                        <div class="input-group">
                            <label for="ci-downpayment-percent">Down Payment Percentage (%)</label>
                            <input type="number" id="ci-downpayment-percent" value="20" min="5" max="100">
                            <small>Loan amount should cover down payment</small>
                        </div>
                        
                        <div class="input-group">
                            <label for="ci-mortgage-rate">Child's Mortgage Rate (%)</label>
                            <div class="input-with-helper">
                                <input type="number" id="ci-mortgage-rate" value="4.5" step="0.1">
                                <button type="button" class="helper-btn" onclick="useDefault('ci-mortgage-rate', 4.5)">
                                    ü§î I don't know?
                                </button>
                            </div>
                            <div class="default-feedback" id="ci-mortgage-rate-feedback"></div>
                        </div>
                        
                        <div class="input-group">
                            <label for="ci-annual-appreciation">Annual Home Appreciation (%)</label>
                            <div class="input-with-helper">
                                <input type="number" id="ci-annual-appreciation" value="4" step="0.1">
                                <button type="button" class="helper-btn" onclick="useDefault('ci-annual-appreciation', 4)">
                                    ü§î I don't know?
                                </button>
                            </div>
                            <div class="default-feedback" id="ci-annual-appreciation-feedback"></div>
                        </div>
                    </div>
                    
                    <div>
                        <h3>Tax & Analysis Parameters</h3>
                        
                        <div class="input-group">
                            <label for="ci-marginal-tax">Parent's Marginal Tax Rate (%)</label>
                            <div class="input-with-helper">
                                <input type="number" id="ci-marginal-tax" value="25" step="0.1">
                                <button type="button" class="helper-btn" onclick="useDefault('ci-marginal-tax', 25)">
                                    ü§î I don't know?
                                </button>
                            </div>
                            <div class="default-feedback" id="ci-marginal-tax-feedback"></div>
                        </div>
                        
                        <div class="input-group">
                            <label for="ci-capital-gain">Capital Gains Inclusion Rate (%)</label>
                            <div class="input-with-helper">
                                <input type="number" id="ci-capital-gain" value="50" step="0.1">
                                <button type="button" class="helper-btn" onclick="useDefault('ci-capital-gain', 50)">
                                    ü§î I don't know?
                                </button>
                            </div>
                            <div class="default-feedback" id="ci-capital-gain-feedback"></div>
                        </div>
                        
                        <div class="input-group">
                            <label for="ci-time-horizon">Time Horizon for Analysis (Years)</label>
                            <input type="number" id="ci-time-horizon" value="30" min="5" max="50">
                            <small>30-year comparison as per meeting minutes</small>
                        </div>
                        
                        <div class="input-group">
                            <label for="ci-simulations">Monte Carlo Simulations</label>
                            <input type="number" id="ci-simulations" value="1000" min="100" max="10000">
                            <small>For stock volatility analysis</small>
                        </div>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button onclick="saveCoInvestingInputs()">Save & Continue</button>
                    <button class="secondary-btn" onclick="skipModel('co-investing')">Skip This Model</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Multi-Generation Living Page -->
    <div id="multi-gen-page" class="page model-input-page">
        <header>
            <div class="container">
                <h1>Multi-Generation Living Strategy</h1>
                <p>Laneway house or rental suite addition</p>
            </div>
        </header>
        
        <div class="container">
            <div class="page-header">
                <button class="back-button" onclick="goBackToFeasibility()">‚Üê Back to Feasibility Check</button>
                <h2>Key Questions (from meeting minutes 3.c.ii)</h2>
            </div>
            
            <div class="card">
                <div class="questionnaire-section">
                    <!-- Questions from meeting minutes section 3.c.ii -->
                    <div class="input-group">
                        <label>1. How will construction be funded?</label>
                        <select id="mg-funding">
                            <option value="">Select...</option>
                            <option value="loc">Line of Credit (LOC)</option>
                            <option value="construction">Construction Loan</option>
                            <option value="remortgage">Re-mortgage</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="mg-property-value">Current Property Value ($)</label>
                        <input type="number" id="mg-property-value" value="1000000" min="0">
                    </div>

                    <div class="input-group">
                        <label for="mg-loan-rate">Construction Loan Interest Rate (%)</label>
                        <input type="number" id="mg-loan-rate" value="5.5" step="0.1" min="0">
                    </div>

                    <div class="input-group">
                        <label for="mg-loan-term">Construction Loan Term (Years)</label>
                        <input type="number" id="mg-loan-term" value="25" min="5" max="30">
                    </div>

                    <div class="input-group">
                        <label>2. If the child doesn't live there, what rent will the child must pay? ($/month)</label>
                        <div class="input-with-helper">
                            <input type="number" id="mg-rent-if-not-living" value="1500" min="0">
                            <button type="button" class="helper-btn" onclick="useDefault('mg-rent-if-not-living', 1500)">
                                ü§î I don't know?
                            </button>
                        </div>
                        <div class="default-feedback" id="mg-rent-if-not-living-feedback"></div>
                    </div>
                    
                    <div class="input-group">
                        <label>3. Can the property support a laneway house or rental suite?</label>
                        <select id="mg-property-support">
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                            <option value="unsure">Not Sure</option>
                        </select>
                    </div>
                    
                    <div class="input-group" id="mg-build-cost-group">
                        <label>4. Estimated build cost?</label>
                        <select id="mg-build-type" onchange="updateBuildCost()">
                            <option value="laneway">Laneway House ($500k)</option>
                            <option value="suite">Rental Suite ($100k)</option>
                            <option value="custom">Custom Amount</option>
                        </select>
                        <div class="input-with-helper" id="mg-custom-cost-group" style="display: none; margin-top: 0.5rem;">
                            <input type="number" id="mg-custom-cost" value="500000" min="0">
                            <button type="button" class="helper-btn" onclick="useDefault('mg-custom-cost', 500000)">
                                ü§î I don't know?
                            </button>
                        </div>
                        <div class="default-feedback" id="mg-custom-cost-feedback"></div>
                    </div>
                    
                    <div class="input-group">
                        <label>5. Child's ownership equity %? (Default = 15%)</label>
                        <div class="input-with-helper">
                            <input type="number" id="mg-child-equity" value="15" min="0" max="100">
                            <button type="button" class="helper-btn" onclick="useDefault('mg-child-equity', 15)">
                                ü§î I don't know?
                            </button>
                        </div>
                        <div class="default-feedback" id="mg-child-equity-feedback"></div>
                    </div>
                    
                    <div class="input-group">
                        <label>6. How long will the child live there? (Years)</label>
                        <input type="number" id="mg-living-years" value="10" min="1">
                    </div>
                    
                    <div class="input-group">
                        <label>7. How will the child access their equity later?</label>
                        <select id="mg-equity-access">
                            <option value="loc">Line of Credit (LOC)</option>
                            <option value="reverse-mortgage">Reverse Mortgage</option>
                            <option value="remortgage">Re-mortgage</option>
                            <option value="cash">Cash (sell property)</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <!-- Comfort Scale 
                    <div class="input-group">
                        <label>Your Comfort Level with This Strategy</label>
                        <div class="comfort-scale-inline">
                            <span>Least Favorite</span>
                            <input type="range" min="1" max="5" value="3" class="comfort-slider" id="mg-comfort">
                            <span>Top Option</span>
                            <div class="comfort-labels">
                                <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span>
                            </div>
                        </div>
                    </div>-->
                </div>
                
                <div class="form-actions">
                    <button onclick="saveMultiGenInputs()">Save & Continue</button>
                    <button class="secondary-btn" onclick="skipModel('multi-gen')">Skip This Model</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Early Inheritance Page -->
    <div id="early-inheritance-page" class="page model-input-page">
        <header>
            <div class="container">
                <h1>Early Inheritance Strategy</h1>
                <p>Advancing inheritance for home purchase</p>
            </div>
        </header>
        
    <div class="container">
        <div class="page-header">
            <button class="back-button" onclick="goBackToFeasibility()">‚Üê Back to Feasibility Check</button>
            <h2>Advance Inheritance for Down Payment</h2>
        </div>
        
        <div class="card">
            <div class="scenario-explanation">
                <p><strong>Logic:</strong> Compare giving inheritance now vs. later, considering rental costs if child has to wait.</p>
                <p><strong>Key Factors:</strong> Rental costs with inflation, home appreciation, and investment returns on kept inheritance.</p>
            </div>
            
            <div class="input-section">
                <div>
                    <h3>Inheritance Details</h3>
                    
                    <div class="input-group">
                        <label for="ei-early-amount">Early Inheritance Amount ($)</label>
                        <input type="number" id="ei-early-amount" value="100000" min="0">
                        <small>Amount gifted now for down payment</small>
                    </div>
                    
                    <div class="input-group">
                        <label for="ei-late-amount">Late Inheritance Amount ($)</label>
                        <div class="input-with-helper">
                            <input type="number" id="ei-late-amount" value="750000" min="0">
                            <button type="button" class="helper-btn" onclick="useDefault('ei-late-amount', 750000)">
                                ü§î I don't know?
                            </button>
                        </div>
                        <div class="default-feedback" id="ei-late-amount-feedback"></div>
                        <small>Amount received if waiting until parents pass away</small>
                    </div>
                    
                    <div class="input-group">
                        <label for="ei-years-until-late">Years Until Late Inheritance</label>
                        <div class="input-with-helper">
                            <input type="number" id="ei-years-until-late" value="30" min="5" max="50">
                            <button type="button" class="helper-btn" onclick="useDefault('ei-years-until-late', 30)">
                                ü§î I don't know?
                            </button>
                        </div>
                        <div class="default-feedback" id="ei-years-until-late-feedback"></div>
                    </div>
                    
                    <div class="input-group">
                        <label for="ei-investment-return">Investment Return on Kept Inheritance (%)</label>
                        <div class="input-with-helper">
                            <input type="number" id="ei-investment-return" value="6" step="0.1">
                            <button type="button" class="helper-btn" onclick="useDefault('ei-investment-return', 6)">
                                ü§î I don't know?
                            </button>
                        </div>
                        <div class="default-feedback" id="ei-investment-return-feedback"></div>
                        <small>If parents keep inheritance and invest it</small>
                    </div>
                </div>
                
                <div>
                    <h3>Rental & Market Details</h3>
                    
                    <div class="input-group">
                        <label for="ei-monthly-rent">Monthly Rent if No Early Inheritance ($)</label>
                        <div class="input-with-helper">
                            <input type="number" id="ei-monthly-rent" value="1500" min="0">
                            <button type="button" class="helper-btn" onclick="useDefault('ei-monthly-rent', 1500)">
                                ü§î I don't know?
                            </button>
                        </div>
                        <div class="default-feedback" id="ei-monthly-rent-feedback"></div>
                    </div>
                    
                    <div class="input-group">
                        <label for="ei-rent-inflation">Annual Rent Inflation (%)</label>
                        <div class="input-with-helper">
                            <input type="number" id="ei-rent-inflation" value="3" step="0.1">
                            <button type="button" class="helper-btn" onclick="useDefault('ei-rent-inflation', 3)">
                                ü§î I don't know?
                            </button>
                        </div>
                        <div class="default-feedback" id="ei-rent-inflation-feedback"></div>
                    </div>
                    
                    <div class="input-group">
                        <label for="ei-home-price">Home Purchase Price with Early Gift ($)</label>
                        <input type="number" id="ei-home-price" value="500000" min="0">
                        <small>Based on early inheritance as down payment (20% down)</small>
                    </div>
                    
                    <div class="input-group">
                        <label for="ei-home-appreciation">Annual Home Appreciation (%)</label>
                        <div class="input-with-helper">
                            <input type="number" id="ei-home-appreciation" value="4" step="0.1">
                            <button type="button" class="helper-btn" onclick="useDefault('ei-home-appreciation', 4)">
                                ü§î I don't know?
                            </button>
                        </div>
                        <div class="default-feedback" id="ei-home-appreciation-feedback"></div>
                    </div>
                    
                    <div class="input-group">
                        <label for="ei-mortgage-rate">Mortgage Rate for Child (%)</label>
                        <div class="input-with-helper">
                            <input type="number" id="ei-mortgage-rate" value="4.5" step="0.1">
                            <button type="button" class="helper-btn" onclick="useDefault('ei-mortgage-rate', 4.5)">
                                ü§î I don't know?
                            </button>
                        </div>
                        <div class="default-feedback" id="ei-mortgage-rate-feedback"></div>
                    </div>
                </div>
                
                <div>
                    <h3>Tax & Retirement Impact</h3>
                    
                    <div class="input-group">
                        <label for="ei-retirement-impact">Impact on Parents' Retirement?</label>
                        <select id="ei-retirement-impact">
                            <option value="no">No Impact - Retirement fully funded</option>
                            <option value="moderate">Moderate Impact</option>
                            <option value="significant">Significant Impact</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="ei-tax-implications">Consider tax implications?</label>
                        <select id="ei-tax-implications">
                            <option value="yes">Yes - need professional advice</option>
                            <option value="no">No - gift within limits</option>
                            <option value="unsure">Not sure</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="ei-other-beneficiaries">Other beneficiaries aware?</label>
                        <select id="ei-other-beneficiaries">
                            <option value="yes">Yes - all informed</option>
                            <option value="some">Some are aware</option>
                            <option value="no">No - private matter</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="ei-child-income">Child's Annual Income ($)</label>
                        <div class="input-with-helper">
                            <input type="number" id="ei-child-income" value="60000" min="0">
                            <button type="button" class="helper-btn" onclick="useDefault('ei-child-income', 60000)">
                                ü§î I don't know?
                            </button>
                        </div>
                        <div class="default-feedback" id="ei-child-income-feedback"></div>
                    </div>
                </div>
            </div>
            
            <div class="form-actions">
                <button onclick="saveEarlyInheritanceInputs()">Save & Continue</button>
                <button class="secondary-btn" onclick="skipModel('early-inheritance')">Skip This Model</button>
            </div>
        </div>
    </div>
</div>
    
    <!-- Home Equity Usage Page -->
    <div id="home-equity-page" class="page model-input-page">
        <header>
            <div class="container">
                <h1>Home Equity Strategy</h1>
                <p>Using home equity to support child's purchase</p>
            </div>
        </header>
        
        <div class="container">
            <div class="page-header">
                <button class="back-button" onclick="goBackToFeasibility()">‚Üê Back to Feasibility Check</button>
                <h2>Tap into Home Equity</h2>
            </div>
            
            <div class="card">
                <div class="scenario-explanation">
                    <p><strong>Logic:</strong> Parents use their home equity (via HELOC, refinance, or reverse mortgage) to provide funds for child's down payment.</p>
                    
                    <p><strong>Options:</strong> Home Equity Line of Credit (HELOC), refinance existing mortgage, or reverse mortgage for seniors.</p>
                </div>
                
                <div class="input-section">
                    <div>
                        <h3>Parent's Home Details</h3>
                        
                        <div class="input-group">
                            <label for="he-home-value">Current Home Value ($)</label>
                            <input type="number" id="he-home-value" value="750000" min="0">
                        </div>
                        
                        <div class="input-group">
                            <label for="he-current-mortgage">Current Mortgage Balance ($)</label>
                            <input type="number" id="he-current-mortgage" value="200000" min="0"  oninput="calculateAvailableEquity()">
                        </div>
                        
                        <div class="input-group">
                            <label for="he-available-equity">Available Equity ($)</label>
                            <input type="number" id="he-available-equity" value="400000" min="0" readonly>
                            <small>Calculated: (Value √ó 80%) - Mortgage Balance</small>
                        </div>
                        
                        <div class="input-group">
                            <label for="he-current-rate">Current Mortgage Rate (%)</label>
                            <input type="number" id="he-current-rate" value="3.5" step="0.1" min="0">
                        </div>
                    </div>
                    
                    <div>
                        <h3>Equity Access Method</h3>
                        
                        <div class="input-group">
                            <label for="he-method">How to access equity?</label>
                            <select id="he-method"  onchange="handleMethodChange()">
                                <option value="heloc">HELOC (Home Equity Line of Credit)</option>
                                <option value="refinance">Refinance Mortgage</option>
                                <option value="reverse">Reverse Mortgage</option>
                                <option value="second">Second Mortgage</option>
                            </select>
                        </div>
                        
                        <div class="input-group">
                            <label for="he-amount-needed">Amount Needed for Child ($)</label>
                            <input type="number" id="he-amount-needed" value="100000" min="0">
                        </div>
                        
                        <div class="input-group">
                            <label for="he-new-rate">New/HELOC Interest Rate (%)</label>
                            <div class="input-with-helper">
                                <input type="number" id="he-new-rate" value="5.5" step="0.1" min="0">
                                <button type="button" class="helper-btn" onclick="useDefault('he-new-rate', 5.5)">
                                    ü§î I don't know?
                                </button>
                            </div>
                            <div class="default-feedback" id="he-new-rate-feedback"></div>
                        </div>
                        
                        <div class="input-group">
                            <label for="he-repayment">Repayment Responsibility</label>
                            <select id="he-repayment">
                                <option value="parents">Parents repay</option>
                                <option value="child">Child repays parents</option>
                                <option value="shared">Shared repayment</option>
                                <option value="interest-only">Interest only payments</option>
                            </select>
                        </div>
                    </div>
                    <!-- Add to home-equity-page if not already available -->
                    <div class="input-group">
                        <label for="he-child-income">Child's Annual Income ($)</label>
                        <div class="input-with-helper">
                            <input type="number" id="he-child-income" value="60000" min="0">
                            <button type="button" class="helper-btn" onclick="useDefault('he-child-income', 60000)">
                                ü§î I don't know?
                            </button>
                        </div>
                        <div class="default-feedback" id="he-child-income-feedback"></div>
                    </div>
                    
                    <div>
                        <h3>Risk Assessment</h3>
                        
                        <div class="input-group">
                            <label for="he-parent-income">Parents' Combined Annual Income ($)</label>
                            <input type="number" id="he-parent-income" value="120000" min="0">
                        </div>
                        
                        <div class="input-group">
                            <label for="he-parent-age">Parents' Average Age</label>
                            <input type="number" id="he-parent-age" value="58" min="18" max="100">
                        </div>
                        
                        <div class="input-group">
                            <label for="he-retirement-timeline">Years Until Retirement</label>
                            <input type="number" id="he-retirement-timeline" value="7" min="0">
                        </div>
                        
                        <div class="input-group">
                            <label for="he-risk-tolerance">Risk Tolerance for Increased Debt</label>
                            <select id="he-risk-tolerance">
                                <option value="low">Low - cautious</option>
                                <option value="medium">Medium - comfortable</option>
                                <option value="high">High - aggressive</option>
                            </select>
                        </div>
                        
                    </div>
                </div>
                
                <div class="form-actions">
                    <button onclick="saveHomeEquityInputs()">Save & Continue</button>
                    <button class="secondary-btn" onclick="skipModel('home-equity')">Skip This Model</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- MODEL NAVIGATION BAR -->
    <div class="model-navigation" id="model-navigation" style="display: none;">
        <div class="container">
            <div class="nav-card">
                <h3>Progress: <span id="current-model">1</span> of <span id="total-models">5</span></h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill" style="width: 20%;"></div>
                </div>
                <div class="nav-buttons">
                    <button class="nav-btn" onclick="goToPreviousModel()" id="prev-btn" disabled>‚Üê Previous</button>
                    <button class="nav-btn" onclick="goToNextModel()" id="next-btn">Next ‚Üí</button>
                </div>
                <button class="finish-btn" onclick="handleFinishButtonClick()" id="finish-btn" style="display: none;">Finish & Compare Results</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeModelsPage();
        });

        function goBackToMatchmaker() {
            // Clear current selections but keep session
            localStorage.removeItem('selectedModels');
            localStorage.removeItem('recommendedModels');
            window.location.href = 'Matchmaker.html';
        }
    </script>
</body>
</html>